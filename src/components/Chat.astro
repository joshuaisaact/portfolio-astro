---
interface Props {
  role: 'user' | 'assistant' | 'translation' | 'candidate';
}

const { role } = Astro.props;

const roleConfig = {
  user: { class: 'chat-user', label: 'Me' },
  assistant: { class: 'chat-assistant', label: 'Claude' },
  translation: { class: 'chat-translation', label: 'Translated' },
  candidate: { class: 'chat-candidate', label: 'Candidate' },
};

const config = roleConfig[role];
---

<div class={`chat-message ${config.class}`}>
  <div class="chat-label">{config.label}</div>
  <div class="chat-content">
    <slot />
  </div>
</div>

<style>
  .chat-message {
    margin: 1.25rem 0;
    padding: 0 0 0 1rem;
    border-left: 3px solid;
  }

  .chat-user {
    border-color: var(--theme-5);
  }

  .chat-assistant {
    border-color: rgb(217 119 87);
  }

  .chat-translation {
    border-color: rgb(34 197 94);
  }

  .chat-candidate {
    border-color: rgb(245 158 11);
  }

  .chat-label {
    font-size: 0.8rem;
    font-weight: 600;
    margin-bottom: 0.375rem;
  }

  .chat-user .chat-label {
    color: var(--theme-5);
  }

  .chat-assistant .chat-label {
    color: rgb(217 119 87);
  }

  .chat-translation .chat-label {
    color: rgb(34 197 94);
  }

  .chat-candidate .chat-label {
    color: rgb(245 158 11);
  }

  .chat-content {
    color: rgb(55 65 81);
  }

  :global(.dark) .chat-content {
    color: rgb(209 213 219);
  }

  .chat-content :global(p) {
    margin: 0;
  }

  .chat-content :global(pre) {
    margin: 0.75rem 0 0 0;
  }
</style>
