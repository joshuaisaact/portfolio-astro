@import "tailwindcss";
@plugin "@tailwindcss/typography";

@variant dark (.dark &);

@theme {
  --color-gray-850: #1a1d29;

  --font-fraunces: "Fraunces Variable", Georgia, "Times New Roman", serif;
  --font-ibm-plex: "IBM Plex Sans Variable", ui-sans-serif, system-ui, sans-serif;
}

:root {
  --theme-5: #4a6b62; /* Muted sage - primary accent */
}

.dark img[src*="github.svg"],
.dark img[src*="express.svg"],
.dark img[src*="nodejs.svg"] {
  filter: invert(1);
}

html {
  background: linear-gradient(to bottom, #f9fafb 0%, #ffffff 50%, #f9fafb 100%);
  color: #000;
  scroll-behavior: smooth;
}

html.dark {
  background: linear-gradient(to bottom, #0f172a 0%, #0a0f1a 100%);
  background-attachment: fixed;
  color: #fff;
}

.dark .menu {
  background-color: #fff;
  color: #000;
}

.dark .nav-links a:hover,
.dark .nav-links a:focus {
  color: #0d0950;
}

.dark .nav-links a {
  color: #fff;
}

/* Code block styling */
.prose pre {
  position: relative;
  border-radius: 0.5rem;
  padding: 1rem;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  border: 1px solid rgb(0 0 0 / 0.05);
  backdrop-filter: blur(8px);
  overflow-x: auto;
}

.dark .prose pre {
  border-color: rgb(255 255 255 / 0.05);
}

.dark .prose pre code {
  background: transparent !important;
}

.prose pre code {
  display: block;
}

.prose :not(pre) > code {
  border-radius: 0.25rem;
  background-color: rgb(0 0 0 / 0.06);
  padding: 0.1rem 0.3rem;
  font-size: 0.9em;
  color: #1a1a1a;
  font-weight: 400;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.dark .prose :not(pre) > code {
  background-color: rgb(255 255 255 / 0.08);
  color: #e0e0e0;
}

.prose code::before,
.prose code::after {
  content: none;
}

.prose pre code {
  background: transparent;
  padding: 0;
}

/* Copy button for code blocks */
.code-block-wrapper {
  position: relative;
}

/* Code blocks break out of prose column slightly on larger screens */
@media (min-width: 768px) {
  .code-block-wrapper {
    margin-left: -2rem;
    margin-right: -2rem;
  }
}

@media (min-width: 1024px) {
  .code-block-wrapper {
    margin-left: -3rem;
    margin-right: -3rem;
  }
}

.copy-button {
  position: absolute;
  right: 0.75rem;
  top: 0.75rem;
  border-radius: 0.25rem;
  background-color: rgb(55 65 81 / 0.5);
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  color: rgb(229 231 235);
  transition: background-color 0.15s, opacity 0.15s;
  backdrop-filter: blur(8px);
  opacity: 0;
}

.code-block-wrapper:hover .copy-button {
  opacity: 1;
}

.copy-button:hover {
  background-color: rgb(75 85 99 / 0.5);
}

.copy-button.copied {
  background-color: rgb(21 128 61 / 0.5);
}

.copy-button.copied:hover {
  background-color: rgb(22 163 74 / 0.5);
}

/* Article title styling - serif for personality */
.article-title {
  font-family: var(--font-fraunces);
  font-weight: 600;
  font-variation-settings: "SOFT" 50, "WONK" 1;
}

/* Vertical rhythm - 8px baseline grid */
.prose p,
.prose ul,
.prose ol,
.prose blockquote,
.prose figure {
  margin-top: 1.5rem; /* 24px */
  margin-bottom: 1.5rem; /* 24px */
}

.prose h2 {
  margin-top: 3rem; /* 48px */
  margin-bottom: 1rem; /* 16px */
}

.prose h3 {
  margin-top: 2rem; /* 32px */
  margin-bottom: 0.5rem; /* 8px */
}

.prose h4 {
  margin-top: 1.5rem; /* 24px */
  margin-bottom: 0.5rem; /* 8px */
}

.prose hr {
  margin-top: 3rem; /* 48px */
  margin-bottom: 3rem; /* 48px */
}

.prose li {
  margin-top: 0.5rem; /* 8px */
  margin-bottom: 0.5rem; /* 8px */
}

/* All prose headings get serif treatment */
.prose h1,
.prose h2,
.prose h3,
.prose h4 {
  font-family: var(--font-fraunces);
  font-weight: 600;
  font-variation-settings: "SOFT" 50, "WONK" 1;
}

/* Reset headings inside not-prose sections */
.not-prose h1,
.not-prose h2,
.not-prose h3,
.not-prose h4 {
  font-family: var(--font-ibm-plex);
  font-weight: 600;
  font-variation-settings: normal;
}

/* Prose enhancements - bolder accent color usage */
.prose a:not(.not-prose a):not([class*="bg-"]) {
  color: var(--theme-5);
  text-decoration: underline;
  text-decoration-color: var(--theme-5);
  text-underline-offset: 2px;
  transition: text-decoration-color 0.15s;
}

.prose a:not(.not-prose a):not([class*="bg-"]):hover {
  text-decoration-color: currentColor;
}

.dark .prose a:not(.not-prose a):not([class*="bg-"]) {
  color: #6b9e8f;
}

.dark .prose a:not(.not-prose a):not([class*="bg-"]):hover {
  color: #8fbdae;
}

/* Blockquotes with accent */
.prose blockquote {
  border-left-color: var(--theme-5);
  border-left-width: 3px;
  background: linear-gradient(to right, rgb(74 107 98 / 0.05), transparent);
  padding-left: 1.25rem;
  font-style: normal;
}

.dark .prose blockquote {
  background: linear-gradient(to right, rgb(107 158 143 / 0.1), transparent);
}